# Zone Controller - Complete Dashboard
# Full dashboard with all cards combined
# Add this entire file as a new dashboard view in Lovelace

title: Zone Controller
path: zone-controller
icon: mdi:home-thermometer
cards:
  # Overview Section
  - type: vertical-stack
    cards:
      - type: markdown
        content: |
          # ðŸ  Zone Controller Dashboard
          
          **Status:** {{ states('sensor.rooms_to_condition') }}
          
          **Thermostat:** {{ states('climate.main_floor_thermostat') }} | 
          **Action:** {{ state_attr('climate.main_floor_thermostat', 'hvac_action') | default('idle') }}
          
          **Mode:** {{ state_attr('climate.main_floor_thermostat', 'hvac_mode') | default('off') }} | 
          **Setpoint:** {{ state_attr('climate.main_floor_thermostat', 'temperature') | default('N/A') }}Â°F

      # Control Toggles
      - type: entities
        title: Control
        show_header_toggle: false
        entities:
          - entity: input_boolean.auto_vent_control
            name: Vent Control
          - entity: input_boolean.auto_thermostat_control
            name: Thermostat Control
          - entity: input_boolean.debug_mode
            name: Debug Mode
          - entity: input_boolean.require_occupancy
            name: Require Occupancy
          - entity: input_boolean.heat_boost_enabled
            name: Heat Boost Enabled

  # All Rooms Grid
  - type: grid
    square: false
    columns: 3
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.master_temp_degf
        name: Master Bedroom
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.master_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.master_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.master_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.blue_temp_degf
        name: Blue Room
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.blue_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.blue_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.blue_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.gold_temp_degf
        name: Gold Room
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.gold_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.gold_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.gold_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.green_temp_degf
        name: Green Room
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.green_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.green_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.green_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.grey_temp_degf
        name: Grey Room
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.grey_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.grey_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.grey_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.guest_temp_degf
        name: Guest Room
        icon: mdi:bed
        icon_color: |
          {% set delta = states('sensor.guest_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.guest_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.guest_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.family_temp_degf
        name: Family Room
        icon: mdi:sofa
        icon_color: |
          {% set delta = states('sensor.family_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.family_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.family_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.kitchen_temp_degf
        name: Kitchen
        icon: mdi:chef-hat
        icon_color: |
          {% set delta = states('sensor.kitchen_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.kitchen_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.kitchen_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.basement_temp_degf
        name: Basement
        icon: mdi:stairs
        icon_color: |
          {% set delta = states('sensor.basement_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.basement_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.basement_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

      - type: custom:mushroom-entity-card
        entity: sensor.piano_temp_degf
        name: Piano Room
        icon: mdi:music
        icon_color: |
          {% set delta = states('sensor.piano_delta_degf') | float(0) %}
          {% if delta > 2 %}red{% elif delta > 0 %}orange{% elif delta < -2 %}blue{% elif delta < 0 %}light-blue{% else %}green{% endif %}
        secondary_info: |
          {{ states('sensor.piano_target_degf') | default('N/A') }}Â°F | 
          Î”{{ states('sensor.piano_delta_degf') | default('0.0') }}Â°F
        layout: vertical
        tap_action:
          action: more-info

  # Thermostat Control
  - type: thermostat
    entity: climate.main_floor_thermostat
    name: Main Thermostat

  # System Status
  - type: vertical-stack
    cards:
      - type: entities
        title: System Status
        show_header_toggle: false
        entities:
          - entity: sensor.rooms_to_condition
            name: Rooms To Condition
          - entity: sensor.zone_controller_statistics
            name: Statistics
          - entity: sensor.hvac_cycle_protection_status
            name: Cycle Protection
          - entity: binary_sensor.thermostat_manual_override
            name: Manual Override

      - type: markdown
        content: |
          ## ðŸŽ¯ Rooms Being Conditioned
          {% set rooms = states('sensor.rooms_to_condition') %}
          {% if rooms not in ['none', 'unknown', 'unavailable', ''] %}
            {% set room_list = rooms.split(',') %}
            {% for room in room_list %}
              - **{{ room | title }}**
            {% endfor %}
          {% else %}
            *No rooms currently need conditioning*
          {% endif %}

